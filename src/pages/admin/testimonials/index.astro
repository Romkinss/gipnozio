---
// Admin Testimonials Management Page
// –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞–º–∏

import AdminLayout from '../../../layouts/AdminLayout.astro';
---

<AdminLayout title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏">
  <div class="testimonials-container">
    <div class="testimonials-header">
      <h1 class="page-title">‚≠ê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏</h1>
      <button class="btn-primary" onclick="openAddTestimonialModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
    </div>

    <div class="testimonials-grid">
      <div class="empty-state">
        <p>üì≠ –û—Ç–∑—ã–≤—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</p>
        <p class="empty-subtitle">–§—É–Ω–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞–º–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏</p>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞ -->
    <div id="testimonialModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –æ—Ç–∑—ã–≤</h2>
          <button class="modal-close" onclick="closeAddTestimonialModal()">‚úï</button>
        </div>

        <form class="testimonial-form" id="testimonialForm">
          <div class="form-group">
            <label for="name">–ò–º—è *</label>
            <input 
              type="text" 
              id="name" 
              name="name" 
              placeholder="–ò–º—è –∞–≤—Ç–æ—Ä–∞ –æ—Ç–∑—ã–≤–∞"
              required
            />
          </div>

          <div class="form-group">
            <label for="role">–î–æ–ª–∂–Ω–æ—Å—Ç—å/–†–æ–ª—å *</label>
            <input 
              type="text" 
              id="role" 
              name="role" 
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Å–∏—Ö–æ–ª–æ–≥, –í—Ä–∞—á"
              required
            />
          </div>

          <div class="form-group">
            <label for="company">–ö–æ–º–ø–∞–Ω–∏—è/–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</label>
            <input 
              type="text" 
              id="company" 
              name="company" 
              placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
            />
          </div>

          <div class="form-group">
            <label for="content">–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ *</label>
            <textarea 
              id="content" 
              name="content" 
              placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –æ—Ç–∑—ã–≤..."
              rows="5"
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label for="rating">–†–µ–π—Ç–∏–Ω–≥ *</label>
            <div class="rating-input">
              <input type="radio" id="star5" name="rating" value="5" required />
              <label for="star5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 –∑–≤—ë–∑–¥</label>
              
              <input type="radio" id="star4" name="rating" value="4" />
              <label for="star4">‚≠ê‚≠ê‚≠ê‚≠ê 4 –∑–≤–µ–∑–¥—ã</label>
              
              <input type="radio" id="star3" name="rating" value="3" />
              <label for="star3">‚≠ê‚≠ê‚≠ê 3 –∑–≤–µ–∑–¥—ã</label>
            </div>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" name="verified" />
              –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –æ—Ç–∑—ã–≤
            </label>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-submit">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–∑—ã–≤</button>
            <button type="button" class="btn-cancel" onclick="closeAddTestimonialModal()">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</AdminLayout>

<style>
  .testimonials-container {
    max-width: 1200px;
  }

  .testimonials-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    gap: 1rem;
  }

  .page-title {
    font-size: 2rem;
    font-weight: 700;
    color: #1a1a1a;
    margin: 0;
  }

  .btn-primary {
    padding: 0.75rem 1.5rem;
    background-color: #D4AF37;
    color: #1a1a1a;
    text-decoration: none;
    border-radius: 0.5rem;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .btn-primary:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
  }

  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  .empty-state {
    grid-column: 1 / -1;
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 0.75rem;
    padding: 3rem;
    text-align: center;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .empty-state p {
    font-size: 1.25rem;
    color: #999;
    margin-bottom: 0.5rem;
  }

  .empty-subtitle {
    font-size: 0.875rem;
    color: #bbb;
  }

  /* Modal Styles */
  .modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }

  .modal-content {
    background: white;
    border-radius: 0.75rem;
    padding: 2rem;
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e0e0e0;
  }

  .modal-header h2 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1a1a1a;
    margin: 0;
  }

  .modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #999;
    transition: color 0.3s ease;
  }

  .modal-close:hover {
    color: #1a1a1a;
  }

  .testimonial-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #1a1a1a;
  }

  .form-group input[type="text"],
  .form-group input[type="email"],
  .form-group textarea {
    padding: 0.75rem;
    border: 1px solid #e0e0e0;
    border-radius: 0.375rem;
    font-family: inherit;
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: #D4AF37;
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
  }

  .rating-input {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .rating-input input[type="radio"] {
    display: none;
  }

  .rating-input label {
    padding: 0.5rem;
    border: 1px solid #e0e0e0;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: normal;
    margin-bottom: 0;
  }

  .rating-input input[type="radio"]:checked + label {
    background-color: #fffbf0;
    border-color: #D4AF37;
    color: #D4AF37;
  }

  .form-group input[type="checkbox"] {
    width: auto;
    margin-right: 0.5rem;
  }

  .form-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #e0e0e0;
  }

  .btn-submit {
    padding: 0.75rem 1.5rem;
    background-color: #D4AF37;
    color: #1a1a1a;
    border: none;
    border-radius: 0.5rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    flex: 1;
  }

  .btn-submit:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }

  .btn-cancel {
    padding: 0.75rem 1.5rem;
    background-color: #f0f0f0;
    color: #1a1a1a;
    border: 1px solid #e0e0e0;
    border-radius: 0.5rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    flex: 1;
  }

  .btn-cancel:hover {
    background-color: #e0e0e0;
  }

  @media (max-width: 768px) {
    .testimonials-header {
      flex-direction: column;
      align-items: flex-start;
    }

    .modal-content {
      width: 95%;
    }
  }
</style>

<script>
  function openAddTestimonialModal() {
    const modal = document.getElementById('testimonialModal');
    if (modal) {
      modal.style.display = 'flex';
    }
  }

  function closeAddTestimonialModal() {
    const modal = document.getElementById('testimonialModal');
    if (modal) {
      modal.style.display = 'none';
    }
  }

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
  document.addEventListener('click', (e) => {
    const modal = document.getElementById('testimonialModal');
    if (modal && e.target === modal) {
      modal.style.display = 'none';
    }
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
  document.getElementById('testimonialForm')?.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target as HTMLFormElement);
    const data = Object.fromEntries(formData);
    
    console.log('–û—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω:', data);
    alert('‚úÖ –û—Ç–∑—ã–≤ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω (—Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)');
    closeAddTestimonialModal();
  });
</script>
